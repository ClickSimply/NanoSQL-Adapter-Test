!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";(function(e){function n(e,n,r){t.setFast(function(){var t;try{t=n.apply(null,r)}catch(t){return w._reject(e,t)}return t===e?w._reject(e,new TypeError):w._resolve(e,t),null})}function r(e){var t=e&&e.then;return!e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t?null:function(){t.apply(e,arguments)}}function i(e,t){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,w._reject(e,t))}function r(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,w._resolve(e,t))}function i(){t(r,n)}var s=!1,a=o(i);"error"===a._status&&n(a._value)}function o(e,t){var n={_status:null,_value:null};try{n._value=e(t),n._status="success"}catch(e){n._status="error",n._value=e}return n}Object.defineProperty(t,"__esModule",{value:!0});var s=0,a={},u=Array.prototype.slice,c=void 0!==e,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener,l=function(e){return e[0].apply(null,u.call(e,1))},d=function(e){var t,n=e.data;"string"==typeof n&&0===n.indexOf("setMsg")&&(t=a[n])&&(delete a[n],l(t))};"undefined"!=typeof window&&window.addEventListener("message",d);var h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s++,r="setMsg"+n;return a[r]=e,window.postMessage(r,"*"),n};t.setFast=c?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(function(){l(t)})}:f?h:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];setTimeout(function(){l(e)},0)};var p=function(){},m=["R"],y=["F"],v=["P"],_=function(){function e(e){this._state=v,this._queue=[],this._outcome=void 0,e!==p&&i(this,e)}return e.prototype.catch=function(e){return this.then(function(){},e)},e.prototype.then=function(t,r){if("function"!=typeof t&&this._state===y||"function"!=typeof r&&this._state===m)return this;var i=new e(p);if(this._state!==v){n(i,this._state===y?t:r,this._outcome)}else this._queue.push(new g(i,t,r));return i},e.resolve=function(t){return t instanceof this?t:w._resolve(new e(p),t)},e.reject=function(t){return w._reject(new e(p),t)},e.all=function(t){return new e(function(e,n){var r=[];if(!t.length)return void e([]);for(var i=function(n,i,o){void 0!==o?r.push(o):r.push(i),r.length==t.length&&e(r)},o=0;o<t.length;o++)!function(e){t[e].then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i(0,e,void 0)}).catch(function(e){i(0,void 0,e)})}(o)})},e.race=function(t){var n=this,r=t.length,i=!1,o=-1,s=new e(p);if(!1!==Array.isArray(t))return this.reject(new TypeError);if(!r)return this.resolve([]);for(;++o<r;)!function(e){n.resolve(e).then(function(e){i||(i=!0,w._resolve(s,e))},function(e){i||(i=!0,w._reject(s,e))})}(t[o]);return s},e}();t.Promise=_;var g=function(){function e(e,t,n){this._promise=e,"function"==typeof t&&(this._onFulfilled=t,this._callFulfilled=this._otherCallFulfilled),"function"==typeof n&&(this._onRejected=n,this._callRejected=this._otherCallRejected)}return e.prototype._callFulfilled=function(e){w._resolve(this._promise,e)},e.prototype._otherCallFulfilled=function(e){n(this._promise,this._onFulfilled,e)},e.prototype._callRejected=function(e){w._reject(this._promise,e)},e.prototype._otherCallRejected=function(e){n(this._promise,this._onRejected,e)},e}();t._QueueItem=g;var w=function(){function e(){}return e._resolve=function(t,n){var s=o(r,n),a=s._value,u=-1,c=t._queue.length;if("error"===s._status)return e._reject(t,s._value);if(a)i(t,a);else for(t._state=y,t._outcome=n;++u<c;)t._queue[u]._callFulfilled(n);return t},e._reject=function(e,t){e._state=m,e._outcome=t;for(var n=-1,r=e._queue.length;++n<r;)e._queue[n]._callRejected(t);return e},e}()}).call(t,n(6).setImmediate)},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t._assign=function(e){return e?JSON.parse(JSON.stringify(e)):null};var i=function(){function e(e){this.callbacks=e}return e.prototype.then=function(e){var t=this,n=[],i=0;this.callbacks&&this.callbacks.length||e([]);var o=function(){i<t.callbacks.length?t.callbacks[i](function(e){n.push(e),i++,r.setFast(o)}):e(n)};o()},e}();t.CHAIN=i;var o=function(){function e(e){this.callbacks=e}return e.prototype.then=function(e){var t=this,n=[],r=0;this.callbacks&&this.callbacks.length||e([]),this.callbacks.forEach(function(i,o){i(function(i){n[o]=i,++r===t.callbacks.length&&e(n)})})},e}();t.ALL=o;var s="undefined"==typeof window?"":navigator.userAgent;t.isSafari=0!==s.length&&(/^((?!chrome|android).)*safari/i.test(s)||/iPad|iPhone|iPod/.test(s)&&!window.MSStream),t.isMSBrowser=0!==s.length&&(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0||s.indexOf("Edge/")>0),t.isAndroid=/Android/.test(s),t.random16Bits=function(){if("undefined"==typeof crypto)return Math.round(Math.random()*Math.pow(2,16));if(crypto.getRandomValues){var t=new Uint16Array(1);return crypto.getRandomValues(t),t[0]}return"undefined"!==e&&e._crypto.randomBytes?e._crypto.randomBytes(2).reduce(function(e,t){return t*e}):Math.round(Math.random()*Math.pow(2,16))},t.timeid=function(e){for(var n=Math.round((new Date).getTime()/(e?1:1e3)).toString();n.length<(e?13:10);)n="0"+n;return n+"-"+(t.random16Bits()+t.random16Bits()).toString(16)},t.uuid=function(){var e,n,r="";return[r,r,r,r,r,r,r,r,r].reduce(function(i,o,s){for(e=t.random16Bits(),n=4===s?s:5===s?(e%16&3|8).toString(16):r,e=e.toString(16);e.length<4;)e="0"+e;return i+([3,4,5,6].indexOf(s)>-1?"-":r)+(n+e).slice(0,4)},r)},t.hash=function(e){return Math.abs(e.split("").reduce(function(t,n,r){return(t<<5)+t+e.charCodeAt(r)},0)).toString(16)},t.generateID=function(e,n){switch(e){case"int":return n||1;case"uuid":return t.uuid();case"timeId":return t.timeid();case"timeIdms":return t.timeid(!0)}return""},t.cleanArgs=function(e,n){for(var r={},i=e.length||-1;i--;){var o=e[i].split(":");o.length>1?r[o[0]]=t.cast(o[1],n[o[0]]||void 0):r[o[0]]=n[o[0]]||void 0}return r},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.cast=function(e,n){var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},i=typeof n;if("undefined"===i||null===n)return n;var o=function(e,n){switch(e){case"safestr":return o("string",n).replace(/[&<>"'`=\/]/gim,function(e){return r[e]});case"int":return"number"!==i||n%1!=0?parseInt(n||0):n;case"number":case"float":return"number"!==i?parseFloat(n||0):n;case"any[]":case"array":return Array.isArray(n)?n:[];case"uuid":case"timeId":case"timeIdms":case"string":return"string"!==i?String(n):n;case"object":case"obj":case"map":return t.isObject(n)?n:{};case"boolean":case"bool":return!0===n}return n},s=o(String(e||"").toLowerCase(),n);if(-1!==e.indexOf("[]")){var a=e.slice(0,e.lastIndexOf("[]"));return(n||[]).map(function(e){return t.cast(a,e)})}return void 0!==s?["int","float","number"].indexOf(e)>-1&&isNaN(s)?0:s:void 0},t.sortedInsert=function(e,n,r,i){return e.length?(e.splice(t.binarySearch(e,n),0,n),e):(e.push(n),e)},t.binarySearch=function(e,n,r,i){var o=e.length,s=r||0,a=void 0!==i?i:o-1;if(0===o)return 0;if(n>e[a])return a+1;if(n<e[s])return s;if(s>=a)return 0;var u=s+Math.floor((a-s)/2);return n<e[u]?t.binarySearch(e,n,s,u-1):n>e[u]?t.binarySearch(e,n,u+1,a):0},t.removeDuplicates=function(e){if(!e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++)e[n]!==e[n-1]&&t.push(e[n]);return t},t.deepFreeze=function(e){return Object.getOwnPropertyNames(e).forEach(function(n){var r=e[n];"object"==typeof r&&null!==r&&(e[n]=t.deepFreeze(r))}),Object.freeze(e)};var a={};t.objQuery=function(e,t,n){var r=function(e,t,n){return e[t]&&n?r(e,t+1,n[e[t]]):n},i=e+(n?"1":"0"),o=a[i]||[];if(o.length)return r(o,0,t);if(o=e.indexOf("[")>-1?[].concat.apply([],e.split(".").map(function(e){return e.match(/([^\[]+)|\[([^\]]+)\]\[/gim)||e})).map(function(e){return e.replace(/\[|\]/gim,"")}):e.split("."),n){var s=o.shift()+"."+o.shift();o.unshift(s)}return a[i]=o,r(o,0,t)}}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(4)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(0),o=n(10),s=n(1),a=function(){function e(e,t){var n=this;this.adapter=e,this.args=t,new i.Promise(function(e,t){var r=new((o=n.adapter).bind.apply(o,[void 0].concat(n.args)));r.setID("123");var i=[{key:"id",type:"int",props:["pk","ai"]}];r.makeTable("test",i),r.makeTable("test2",i),r.makeTable("test3",i),r.makeTable("test4",i),r.makeTable("test5",i),r.connect(function(){r.destroy(e)});var o}).then(function(){return n.PrimaryKeys()}).then(function(){return console.log("✓ Primary Key Tests Passed"),n.Writes()}).then(function(){return console.log("✓ Write Tests Passed"),n.RangeReads()}).then(function(){return console.log("✓ Range Read Tests Passed"),n.Deletes()}).then(function(){console.log("✓ Delete Tests Passed"),console.log("✓ All Tests Passed!******")}).catch(function(){console.error("Test Failed")})}return e.prototype.Deletes=function(){var e=new((n=this.adapter).bind.apply(n,[void 0].concat(this.args))),t=[];return new i.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new i.Promise(function(n,r){for(var i=[],o=0;o<100;o++)t.push({id:o+1,name:"Title "+(o+1)}),i.push("Title "+(o+1));new s.CHAIN(i.map(function(t){return function(n){e.write("test",null,{name:t},n,!0)}})).then(n)})}).then(function(){return new i.Promise(function(n,r){e.delete("test",3,function(){var i=[];e.rangeRead("test",function(e,t,n){i.push(e),n()},function(){var e=o.equals(i,t.filter(function(e){return 3!==e.id}));o.myConsole.assert(e,"Delete Test"),e?n():r()},void 0,void 0)})})}).then(function(){return new i.Promise(function(t,n){e.destroy(t)})});var n},e.prototype.RangeReads=function(){var e=new((r=this.adapter).bind.apply(r,[void 0].concat(this.args))),t=[],n=[];return new i.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new i.Promise(function(r,i){for(var o=[],a=0;a<100;a++)t.push({id:a+1,name:"Title "+(a+1)}),o.push("Title "+(a+1)),n.push(a+1);new s.CHAIN(o.map(function(t,n){return function(n){e.write("test",null,{name:t},n,!0)}})).then(r)})}).then(function(){return new i.Promise(function(n,r){var i=[];e.rangeRead("test",function(e,t,n){i.push(e),n()},function(){var e=o.equals(i,t.filter(function(e){return e.id>10&&e.id<22}));o.myConsole.assert(e,"Select Range Test"),e?n():r()},10,20)})}).then(function(){return new i.Promise(function(n,r){var i=[];e.rangeRead("test",function(e,t,n){i.push(e),n()},function(){var e=o.equals(i,t.filter(function(e){return e.id>9&&e.id<21}));o.myConsole.assert(e,"Select Range Test (Primary Key)"),e?n():r()},10,20,!0)})}).then(function(){return new i.Promise(function(n,r){var i=[];e.rangeRead("test",function(e,t,n){i.push(e),n()},function(){var e=o.equals(i,t);o.myConsole.assert(e,"Select Entire Table Test"),e?n():r()},void 0,void 0)})}).then(function(){return new i.Promise(function(t,r){e.getIndex("test",!1,function(e){var i=o.equals(e,n);o.myConsole.assert(i,"Select Index Test"),i?t():r()})})}).then(function(){return new i.Promise(function(t,n){e.getIndex("test",!0,function(e){var r=100===e;o.myConsole.assert(r,"Select Index Length Test"),r?t():n()})})}).then(function(){return new i.Promise(function(t,n){e.destroy(t)})});var r},e.prototype.Writes=function(){var e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args)));return new i.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"},{key:"posts",type:"string[]"}]),e.connect(t)}).then(function(){return new i.Promise(function(t,n){e.write("test",null,{name:"Test",posts:[1,2]},function(r){e.read("test",r.id,function(e){var r=o.equals(e,{name:"Test",id:1,posts:[1,2]});o.myConsole.assert(r,"Insert Test"),r?t():n()})},!0)})}).then(function(){return new i.Promise(function(t,n){e.write("test",1,{name:"Testing"},function(r){e.read("test",r.id,function(e){var r=o.equals(e,{name:"Testing",id:1,posts:[1,2]});o.myConsole.assert(r,"Update Test"),r?t():n()})},!1)})}).then(function(){return new i.Promise(function(t,n){e.write("test",1,{name:"Testing"},function(r){e.read("test",r.id,function(e){var r=o.equals(e,{name:"Testing",id:1});o.myConsole.assert(r,"Replace Test"),r?t():n()})},!0)})}).then(function(){return new i.Promise(function(t,n){e.destroy(t)})});var t},e.prototype.PrimaryKeys=function(){var e=new((t=this.adapter).bind.apply(t,[void 0].concat(this.args)));return new i.Promise(function(t,n){e.setID("123"),e.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),e.makeTable("test2",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test3",[{key:"id",type:"timeId",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test4",[{key:"id",type:"timeIdms",props:["pk"]},{key:"name",type:"string"}]),e.makeTable("test5",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),e.connect(t)}).then(function(){return new i.Promise(function(t,n){e.write("test",null,{name:"Test"},function(e){var r=o.equals(e,{name:"Test",id:1});o.myConsole.assert(r,"Test Auto Incriment Integer."),r?t():n()},!0)})}).then(function(){return new i.Promise(function(t,n){e.write("test2",null,{name:"Test"},function(e){var r=e.id.match(/^\w{12}-\w{4}-\w{4}-\w{4}-\w{12}$/);o.myConsole.assert(r,"Test UUID."),r?t():n()},!0)})}).then(function(){return new i.Promise(function(t,n){e.write("test3",null,{name:"Test"},function(e){var r=e.id.match(/^\w{10}-\w{1,5}$/);o.myConsole.assert(r,"Test timeId."),r?t():n()},!0)})}).then(function(){return new i.Promise(function(t,n){e.write("test4",null,{name:"Test"},function(e){var r=e.id.match(/^\w{13}-\w{1,5}$/);o.myConsole.assert(r,"Test timeIdms."),r?t():n()},!0)})}).then(function(){return new i.Promise(function(t,n){for(var r=[],i=0;i<20;i++)r.push(s.uuid());new s.CHAIN(r.map(function(t){return function(n){e.write("test5",t,{name:"Test"},n,!0)}})).then(function(){r.sort();var i=[];e.rangeRead("test5",function(e,t,n){i.push(e.id),n()},function(){var e=o.equals(i,r);o.myConsole.assert(e,"Test Sorted Primary Keys."),e?t():n()},void 0,void 0)})})}).then(function(){return new i.Promise(function(t,n){e.destroy(t)})});var t},e}();t.TestAdapter=a,new a(r._SyncStore,[])},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),s=n(9),a=function(){function e(e){this._pkKey={},this._pkType={},this._rows={},this._dbIndex={},this._ls=e||!1}return e.prototype.connect=function(e){e()},e.prototype.setID=function(e){this._id=e},e.prototype.makeTable=function(e,t){var n=this;this._rows[e]={},this._dbIndex[e]=new s.DatabaseIndex,t.forEach(function(t){if(t.props&&t.props.indexOf("pk")>-1&&(n._pkType[e]=t.type,n._pkKey[e]=t.key),t.props&&t.props.indexOf("ai")>-1&&t.props.indexOf("pk")>-1&&"int"===t.type&&(n._dbIndex[e].doAI=!0),n._ls){var r=localStorage.getItem(n._id+"*"+e+"_idx");r&&n._dbIndex[e].set(JSON.parse(r))}})},e.prototype.write=function(e,t,n,i,s){if(!(t=t||o.generateID(this._pkType[e],this._dbIndex[e].ai)))throw new Error("Can't add a row without a primary key!");if(-1===this._dbIndex[e].indexOf(t)&&(this._dbIndex[e].add(t),this._ls&&localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify(this._dbIndex[e].keys()))),this._ls){var a=r({},s?{}:JSON.parse(localStorage.getItem(this._id+"*"+e+"__"+t)||"{}"),n,(u={},u[this._pkKey[e]]=t,u));localStorage.setItem(this._id+"*"+e+"__"+t,JSON.stringify(a)),i(a)}else{var a=r({},s?{}:this._rows[e][t],n,(c={},c[this._pkKey[e]]=t,c));this._rows[e][t]=o.deepFreeze(a),i(a)}var u,c},e.prototype.delete=function(e,t,n){-1!==this._dbIndex[e].indexOf(t)&&(this._dbIndex[e].remove(t),this._ls&&localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify(this._dbIndex[e].keys()))),this._ls?localStorage.removeItem(this._id+"*"+e+"__"+t):delete this._rows[e][t],n()},e.prototype.read=function(e,t,n){if(this._ls){var r=localStorage.getItem(this._id+"*"+e+"__"+t);n(r?JSON.parse(r):void 0)}else n(this._rows[e][t])},e.prototype.rangeRead=function(e,t,n,r,o,s){var a=this,u=this._dbIndex[e].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[0,u.length-1];if(!u.length)return void n();s&&c&&(f=f.map(function(t){return a._dbIndex[e].getLocation(t)}));var l=f[0],d=0,h=function(){l++,d++,d>200?i.setFast(p):p()},p=function(){if(l<=f[1])if(a._ls){var r=localStorage.getItem(a._id+"*"+e+"__"+u[l]);t(r?JSON.parse(r):void 0,l,h)}else t(a._rows[e][u[l]],l,h);else n()};p()},e.prototype.drop=function(e,t){var n=this;this._ls?(localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify([])),this._dbIndex[e].keys().forEach(function(t){localStorage.removeItem(n._id+"*"+e+"__"+t)})):this._rows[e]={};var r=new s.DatabaseIndex;r.doAI=this._dbIndex[e].doAI,this._dbIndex[e]=r,t()},e.prototype.getIndex=function(e,t,n){n(t?this._dbIndex[e].keys().length:this._dbIndex[e].keys())},e.prototype.destroy=function(e){var t=this;new o.ALL(Object.keys(this._dbIndex).map(function(e){return function(n){t.drop(e,n)}})).then(e)},e}();t._SyncStore=a},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(7),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,a(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function s(e){if(f)setTimeout(s,0,e);else{var t=c[e];if(t){f=!0;try{o(t)}finally{i(e),f=!1}}}}if(!e.setImmediate){var a,u=1,c={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;a=function(t){var n=l.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){a=function(e){setTimeout(s,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(8))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){m&&h&&(m=!1,h.length?p=h.concat(p):y=-1,p.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=p.length;t;){for(h=p,p=[];++y<t;)h&&h[y].run();y=-1,t=p.length}h=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var h,p=[],m=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(){this._sorted=[],this._indexOf={},this.ai=1,this.doAI=!1}return e.prototype.set=function(e){var t=this;if(this._sorted=e||[],this._indexOf={},this._sorted.forEach(function(e,n){t._indexOf[String(e)]=n}),this.doAI&&this._sorted.length){var n=this._sorted.length;this.ai=this._sorted[n-1]+1}},e.prototype.getLocation=function(e){var t=this.indexOf(e);return-1!==t?t:r.binarySearch(this._sorted,e)},e.prototype.add=function(e){if(this.doAI)parseInt(e)>=this.ai&&this.ai++,this._indexOf[String(e)]=this._sorted.length,this._sorted.push(e);else{var t=r.binarySearch(this._sorted,e);this._sorted.splice(t,0,e),this._indexOf[String(e)]=t;for(var n=t+1;n<this._sorted.length;n++)this._indexOf[String(this._sorted[n])]++}},e.prototype.keys=function(){return this._sorted},e.prototype.indexOf=function(e){return void 0!==this._indexOf[String(e)]?this._indexOf[String(e)]:-1},e.prototype.remove=function(e){var t=this._indexOf[String(e)];if(void 0!==t){delete this._indexOf[String(e)],this._sorted.splice(t,1);for(var n=t;n<this._sorted.length;n++)this._indexOf[String(this._sorted[n])]--}},e}();t.DatabaseIndex=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.myConsole=Object.create(console,{assert:{value:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("undefined"==typeof window)try{console.assert.apply(console,[e,t].concat(n))}catch(e){console.error(e.stack)}else console.assert.apply(console,[e,t].concat(n))},configurable:!0,enumerable:!0,writable:!0}}),t.equals=function(e,t){var n=function(e,t){var r,i,o,s,a;if((r=toString.call(e))!==toString.call(t))return!1;switch(r){default:return e.valueOf()===t.valueOf();case"[object Number]":return e=+e,t=+t,e?e===t:e===e?1/e==1/t:t!==t;case"[object RegExp]":return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex;case"[object Function]":return!1;case"[object Array]":if((i=e.length)!==t.length)return!1;for(;i--;)if(!((s=e[i])===(a=t[i])&&0!==s||n(s,a)))return!1;return!0;case"[object Object]":i=0;for(o in e)if(e.hasOwnProperty(o)){if(++i,(s=e[o])===(a=t[o])&&0!==s||n(s,a))continue;return!1}for(o in t)if(t.hasOwnProperty(o)&&--i<0)return!1;return!0}};return e===t&&0!==e||n(e,t)}}])});